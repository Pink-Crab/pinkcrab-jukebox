(()=>{"use strict";var e,t={144(){const e=window.wp.blocks,t=window.React,a=window.wp.i18n,r=window.wp.blockEditor,o=window.wp.components,l=window.wp.element,n=window.wp.primitives,c=(0,t.createElement)(n.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,t.createElement)(n.Path,{d:"M12 3.9 6.5 9.5l1 1 3.8-3.7V20h1.5V6.8l3.7 3.7 1-1z"})),i=(0,t.createElement)(n.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,t.createElement)(n.Path,{d:"m16.5 13.5-3.7 3.7V4h-1.5v13.2l-3.8-3.7-1 1 5.5 5.6 5.5-5.6z"})),u=(0,t.createElement)(n.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,t.createElement)(n.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M12 5.5A2.25 2.25 0 0 0 9.878 7h4.244A2.251 2.251 0 0 0 12 5.5ZM12 4a3.751 3.751 0 0 0-3.675 3H5v1.5h1.27l.818 8.997a2.75 2.75 0 0 0 2.739 2.501h4.347a2.75 2.75 0 0 0 2.738-2.5L17.73 8.5H19V7h-3.325A3.751 3.751 0 0 0 12 4Zm4.224 4.5H7.776l.806 8.861a1.25 1.25 0 0 0 1.245 1.137h4.347a1.25 1.25 0 0 0 1.245-1.137l.805-8.861Z"})),s=(0,t.createElement)(n.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,t.createElement)(n.Path,{d:"M11 12.5V17.5H12.5V12.5H17.5V11H12.5V6H11V11H6V12.5H11Z"}));function k({label:e,color:r,onChange:n}){const[c,i]=(0,l.useState)(!1);return(0,t.createElement)("div",{className:"jukebox-color-picker"},(0,t.createElement)("span",{className:"jukebox-color-picker__label"},e),(0,t.createElement)("button",{type:"button",className:"jukebox-color-picker__button",onClick:()=>i(!c),style:{backgroundColor:r},"aria-label":e}),c&&(0,t.createElement)(o.Popover,{position:"bottom center",onClose:()=>i(!1)},(0,t.createElement)("div",{style:{padding:"16px"}},(0,t.createElement)(o.ColorPicker,{color:r,onChange:n,enableAlpha:!1}),(0,t.createElement)(o.TextControl,{label:(0,a.__)("Or enter CSS value","pinkcrab-jukebox"),value:r,onChange:n,placeholder:"var(--wp-color) or #hex"}))))}function b({track:e,index:n,onUpdate:s,onRemove:k,onMoveUp:b,onMoveDown:p,isFirst:d,isLast:m,isSelected:_,onSelect:x}){const[v,E]=(0,l.useState)(!1);return(0,t.createElement)("div",{className:`jukebox-editor__track ${v?"jukebox-editor__track--expanded":""} ${_?"jukebox-editor__track--selected":""}`},(0,t.createElement)("div",{className:"jukebox-editor__track-header",onClick:()=>x(n),style:{cursor:"pointer"}},(0,t.createElement)("span",{className:"jukebox-editor__track-number"},n+1),e.cover&&(0,t.createElement)("img",{src:e.cover,alt:"",className:"jukebox-editor__track-thumb"}),(0,t.createElement)("div",{className:"jukebox-editor__track-summary"},(0,t.createElement)("strong",null,e.title||(0,a.__)("Untitled","pinkcrab-jukebox")),(0,t.createElement)("span",null,e.artist||(0,a.__)("Unknown Artist","pinkcrab-jukebox"))),(0,t.createElement)("div",{className:"jukebox-editor__track-actions",onClick:e=>e.stopPropagation()},(0,t.createElement)(o.Button,{icon:v?"arrow-up-alt2":"arrow-down-alt2",label:v?(0,a.__)("Collapse","pinkcrab-jukebox"):(0,a.__)("Expand","pinkcrab-jukebox"),onClick:()=>E(!v),size:"small"}),(0,t.createElement)(o.Button,{icon:c,label:(0,a.__)("Move up","pinkcrab-jukebox"),onClick:()=>b(n),disabled:d,size:"small"}),(0,t.createElement)(o.Button,{icon:i,label:(0,a.__)("Move down","pinkcrab-jukebox"),onClick:()=>p(n),disabled:m,size:"small"}),(0,t.createElement)(o.Button,{icon:u,label:(0,a.__)("Remove","pinkcrab-jukebox"),onClick:()=>k(n),isDestructive:!0,size:"small"}))),v&&(0,t.createElement)("div",{className:"jukebox-editor__track-details"},(0,t.createElement)(o.TextControl,{label:(0,a.__)("Track Title","pinkcrab-jukebox"),value:e.title||"",onChange:e=>s(n,"title",e)}),(0,t.createElement)(o.TextControl,{label:(0,a.__)("Artist","pinkcrab-jukebox"),value:e.artist||"",onChange:e=>s(n,"artist",e)}),(0,t.createElement)(o.TextControl,{label:(0,a.__)("Album","pinkcrab-jukebox"),value:e.album||"",onChange:e=>s(n,"album",e)}),(0,t.createElement)(o.TextControl,{label:(0,a.__)("Audio URL","pinkcrab-jukebox"),value:e.url||"",onChange:e=>s(n,"url",e),type:"url"}),(0,t.createElement)(o.TextControl,{label:(0,a.__)("Page Link","pinkcrab-jukebox"),value:e.pageLink||"",onChange:e=>s(n,"pageLink",e),type:"url",help:(0,a.__)("Link to a page with more info about this track","pinkcrab-jukebox")}),(0,t.createElement)("div",{className:"jukebox-editor__track-cover"},(0,t.createElement)("label",null,(0,a.__)("Cover Image","pinkcrab-jukebox")),(0,t.createElement)(r.MediaUploadCheck,null,(0,t.createElement)(r.MediaUpload,{onSelect:e=>s(n,"cover",e.url),allowedTypes:["image"],value:e.coverId,render:({open:r})=>(0,t.createElement)("div",{className:"jukebox-editor__cover-control"},e.cover?(0,t.createElement)(l.Fragment,null,(0,t.createElement)("img",{src:e.cover,alt:(0,a.__)("Cover","pinkcrab-jukebox"),style:{maxWidth:"100px",marginBottom:"8px"}}),(0,t.createElement)(o.Button,{variant:"secondary",onClick:r,size:"small"},(0,a.__)("Replace","pinkcrab-jukebox")),(0,t.createElement)(o.Button,{variant:"tertiary",isDestructive:!0,onClick:()=>s(n,"cover",""),size:"small"},(0,a.__)("Remove","pinkcrab-jukebox"))):(0,t.createElement)(o.Button,{variant:"secondary",onClick:r},(0,a.__)("Select Cover","pinkcrab-jukebox")))}))),(0,t.createElement)("div",{className:"jukebox-editor__track-audio"},(0,t.createElement)("label",null,(0,a.__)("Audio File","pinkcrab-jukebox")),(0,t.createElement)(r.MediaUploadCheck,null,(0,t.createElement)(r.MediaUpload,{onSelect:e=>s(n,"url",e.url),allowedTypes:["audio"],render:({open:r})=>(0,t.createElement)(o.Button,{variant:"secondary",onClick:r},e.url?(0,a.__)("Replace Audio","pinkcrab-jukebox"):(0,a.__)("Select Audio","pinkcrab-jukebox"))})),e.url&&(0,t.createElement)("div",{className:"jukebox-editor__audio-preview"},(0,t.createElement)("audio",{controls:!0,src:e.url,preload:"none"},(0,a.__)("Audio preview","pinkcrab-jukebox"))))))}const p=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"pinkcrab/jukebox","version":"1.0.0","title":"Jukebox","category":"media","icon":"playlist-audio","description":"A responsive audio jukebox with queue, shuffle, and repeat functionality.","keywords":["audio","music","player","jukebox","playlist","mp3"],"attributes":{"blockId":{"type":"string","default":""},"tracks":{"type":"array","default":[],"items":{"type":"object"}},"showFilter":{"type":"boolean","default":true},"showTracklist":{"type":"boolean","default":true},"artworkMaxHeight":{"type":"number","default":300},"backgroundColor":{"type":"string","default":"#1a1a2e"},"primaryColor":{"type":"string","default":"#e94560"},"secondaryColor":{"type":"string","default":"#16213e"},"textColor":{"type":"string","default":"#ffffff"},"textMutedColor":{"type":"string","default":"#a0a0a0"},"progressBackground":{"type":"string","default":"#2d2d44"},"controlHoverColor":{"type":"string","default":"#ff6b6b"}},"supports":{"align":["wide","full"],"html":false,"anchor":true,"spacing":{"margin":true,"padding":true}},"textdomain":"pinkcrab-jukebox","editorScript":"file:./index.js","editorStyle":"file:./index.css","viewScript":"file:./view.js","style":"file:./style-index.css"}');(0,e.registerBlockType)(p.name,{...p,edit:function({attributes:e,setAttributes:n,clientId:c}){const{blockId:i,tracks:u,showFilter:p,showTracklist:d,artworkMaxHeight:m,backgroundColor:_,primaryColor:x,secondaryColor:v,textColor:E,textMutedColor:g,progressBackground:h,controlHoverColor:j}=e,[C,w]=(0,l.useState)(null),y=(0,r.useBlockProps)({className:"jukebox-editor"});(0,l.useEffect)(()=>{i||n({blockId:`jukebox-${c.slice(0,8)}`})},[i,c,n]),(0,l.useEffect)(()=>{null!==C&&C>=u.length&&w(u.length>0?u.length-1:null)},[u.length,C]);const f=null!==C?u[C]:null,T=()=>{const e={id:`track-${Date.now()}`,title:"",artist:"",album:"",cover:"",url:"",pageLink:""};n({tracks:[...u,e]})},B=(e,t,a)=>{const r=[...u];r[e]={...r[e],[t]:a},n({tracks:r})},M=e=>{const t=[...u];t.splice(e,1),n({tracks:t})},S=e=>{if(0===e)return;const t=[...u];[t[e-1],t[e]]=[t[e],t[e-1]],n({tracks:t})},N=e=>{if(e===u.length-1)return;const t=[...u];[t[e],t[e+1]]=[t[e+1],t[e]],n({tracks:t})},A=e=>{const t=e.map(e=>({id:`track-${e.id}`,title:e.title||e.filename||"",artist:e.meta?.artist||"",album:e.meta?.album||"",cover:"",url:e.url,pageLink:""}));n({tracks:[...u,...t]})},L=u.length>0,U={"--jukebox-bg":_,"--jukebox-primary":x,"--jukebox-secondary":v,"--jukebox-text":E,"--jukebox-text-muted":g,"--jukebox-progress-bg":h,"--jukebox-control-hover":j,"--jukebox-artwork-height":`${m}px`};return(0,t.createElement)(l.Fragment,null,(0,t.createElement)(r.InspectorControls,null,f&&(0,t.createElement)(o.PanelBody,{title:(0,a.__)("Edit Track","pinkcrab-jukebox"),initialOpen:!0},(0,t.createElement)("p",{className:"components-base-control__help",style:{marginBottom:"12px"}},(0,a.__)("Editing track","pinkcrab-jukebox")," ",(0,t.createElement)("strong",null,"#",C+1)),(0,t.createElement)(o.TextControl,{label:(0,a.__)("Title","pinkcrab-jukebox"),value:f.title||"",onChange:e=>B(C,"title",e)}),(0,t.createElement)(o.TextControl,{label:(0,a.__)("Artist","pinkcrab-jukebox"),value:f.artist||"",onChange:e=>B(C,"artist",e)}),(0,t.createElement)(o.TextControl,{label:(0,a.__)("Album","pinkcrab-jukebox"),value:f.album||"",onChange:e=>B(C,"album",e)}),(0,t.createElement)(o.TextControl,{label:(0,a.__)("Audio URL","pinkcrab-jukebox"),value:f.url||"",onChange:e=>B(C,"url",e),type:"url"}),(0,t.createElement)(o.TextControl,{label:(0,a.__)("Page Link","pinkcrab-jukebox"),value:f.pageLink||"",onChange:e=>B(C,"pageLink",e),type:"url",help:(0,a.__)("Link to more info about this track","pinkcrab-jukebox")}),(0,t.createElement)(o.TextControl,{label:(0,a.__)("Cover Image URL","pinkcrab-jukebox"),value:f.cover||"",onChange:e=>B(C,"cover",e),type:"url"}),(0,t.createElement)(r.MediaUploadCheck,null,(0,t.createElement)(r.MediaUpload,{onSelect:e=>B(C,"cover",e.url),allowedTypes:["image"],render:({open:e})=>(0,t.createElement)(o.Button,{variant:"secondary",onClick:e,style:{marginBottom:"8px"}},(0,a.__)("Select Cover from Library","pinkcrab-jukebox"))})),(0,t.createElement)(r.MediaUploadCheck,null,(0,t.createElement)(r.MediaUpload,{onSelect:e=>B(C,"url",e.url),allowedTypes:["audio"],render:({open:e})=>(0,t.createElement)(o.Button,{variant:"secondary",onClick:e,style:{marginBottom:"12px"}},(0,a.__)("Select Audio from Library","pinkcrab-jukebox"))})),(0,t.createElement)(o.Button,{variant:"tertiary",isDestructive:!0,onClick:()=>{M(C),w(null)}},(0,a.__)("Delete Track","pinkcrab-jukebox")),(0,t.createElement)(o.Button,{variant:"link",onClick:()=>w(null),style:{marginLeft:"12px"}},(0,a.__)("Close","pinkcrab-jukebox"))),(0,t.createElement)(o.PanelBody,{title:(0,a.__)("Display Settings","pinkcrab-jukebox"),initialOpen:!f},(0,t.createElement)(o.ToggleControl,{label:(0,a.__)("Show Filter","pinkcrab-jukebox"),checked:p,onChange:e=>n({showFilter:e})}),(0,t.createElement)(o.ToggleControl,{label:(0,a.__)("Show Tracklist","pinkcrab-jukebox"),checked:d,onChange:e=>n({showTracklist:e})}),(0,t.createElement)(o.RangeControl,{label:(0,a.__)("Artwork Max Height (px)","pinkcrab-jukebox"),value:m,onChange:e=>n({artworkMaxHeight:e}),min:150,max:600})),(0,t.createElement)(o.PanelBody,{title:(0,a.__)("Colors","pinkcrab-jukebox"),initialOpen:!1},(0,t.createElement)("p",{className:"components-base-control__help"},(0,a.__)("You can use CSS variables like var(--wp-color) or hex values.","pinkcrab-jukebox")),(0,t.createElement)(k,{label:(0,a.__)("Background","pinkcrab-jukebox"),color:_,onChange:e=>n({backgroundColor:e})}),(0,t.createElement)(k,{label:(0,a.__)("Primary (Accent)","pinkcrab-jukebox"),color:x,onChange:e=>n({primaryColor:e})}),(0,t.createElement)(k,{label:(0,a.__)("Secondary","pinkcrab-jukebox"),color:v,onChange:e=>n({secondaryColor:e})}),(0,t.createElement)(k,{label:(0,a.__)("Text","pinkcrab-jukebox"),color:E,onChange:e=>n({textColor:e})}),(0,t.createElement)(k,{label:(0,a.__)("Muted Text","pinkcrab-jukebox"),color:g,onChange:e=>n({textMutedColor:e})}),(0,t.createElement)(k,{label:(0,a.__)("Progress Bar Background","pinkcrab-jukebox"),color:h,onChange:e=>n({progressBackground:e})}),(0,t.createElement)(k,{label:(0,a.__)("Control Hover","pinkcrab-jukebox"),color:j,onChange:e=>n({controlHoverColor:e})}))),(0,t.createElement)("div",{...y,style:U},L?(0,t.createElement)("div",{className:"jukebox-editor__content"},(0,t.createElement)("div",{className:"jukebox-editor__preview",style:U},(0,t.createElement)("div",{className:"jukebox-editor__preview-player"},u[0]?.cover?(0,t.createElement)("img",{src:u[0].cover,alt:"",className:"jukebox-editor__preview-artwork"}):(0,t.createElement)("div",{className:"jukebox-editor__preview-artwork-placeholder"},(0,t.createElement)("svg",{viewBox:"0 0 24 24",fill:"currentColor"},(0,t.createElement)("path",{d:"M12 3v10.55c-.59-.34-1.27-.55-2-.55-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4V7h4V3h-6z"}))),(0,t.createElement)("div",{className:"jukebox-editor__preview-info"},(0,t.createElement)("span",{className:"jukebox-editor__preview-title"},u[0]?.title||(0,a.__)("Track Title","pinkcrab-jukebox")),(0,t.createElement)("span",{className:"jukebox-editor__preview-artist"},u[0]?.artist||(0,a.__)("Artist","pinkcrab-jukebox"))),(0,t.createElement)("div",{className:"jukebox-editor__preview-controls"},(0,t.createElement)("span",null,"⏮"),(0,t.createElement)("span",null,"▶"),(0,t.createElement)("span",null,"⏭")))),(0,t.createElement)("div",{className:"jukebox-editor__tracks-header"},(0,t.createElement)("span",null,(0,a.__)("Tracks","pinkcrab-jukebox")," (",u.length,")"),(0,t.createElement)("div",{className:"jukebox-editor__tracks-actions"},(0,t.createElement)(r.MediaUploadCheck,null,(0,t.createElement)(r.MediaUpload,{onSelect:A,allowedTypes:["audio"],multiple:!0,render:({open:e})=>(0,t.createElement)(o.Button,{variant:"secondary",size:"small",onClick:e},(0,a.__)("Add from Library","pinkcrab-jukebox"))})),(0,t.createElement)(o.Button,{variant:"secondary",size:"small",icon:s,onClick:T},(0,a.__)("Add Manually","pinkcrab-jukebox")))),(0,t.createElement)("div",{className:"jukebox-editor__tracks-list"},u.map((e,a)=>(0,t.createElement)(b,{key:e.id||a,track:e,index:a,onUpdate:B,onRemove:M,onMoveUp:S,onMoveDown:N,isFirst:0===a,isLast:a===u.length-1,isSelected:C===a,onSelect:w})))):(0,t.createElement)(o.Placeholder,{icon:"playlist-audio",label:(0,a.__)("Jukebox","pinkcrab-jukebox"),instructions:(0,a.__)("Add tracks to create your jukebox. You can add audio files from the media library or manually enter track details.","pinkcrab-jukebox")},(0,t.createElement)("div",{className:"jukebox-editor__placeholder-actions"},(0,t.createElement)(r.MediaUploadCheck,null,(0,t.createElement)(r.MediaUpload,{onSelect:A,allowedTypes:["audio"],multiple:!0,render:({open:e})=>(0,t.createElement)(o.Button,{variant:"primary",onClick:e},(0,a.__)("Add Audio from Library","pinkcrab-jukebox"))})),(0,t.createElement)(o.Button,{variant:"secondary",onClick:T},(0,a.__)("Add Track Manually","pinkcrab-jukebox"))))))},save:function(){return null}})}},a={};function r(e){var o=a[e];if(void 0!==o)return o.exports;var l=a[e]={exports:{}};return t[e](l,l.exports,r),l.exports}r.m=t,e=[],r.O=(t,a,o,l)=>{if(!a){var n=1/0;for(s=0;s<e.length;s++){for(var[a,o,l]=e[s],c=!0,i=0;i<a.length;i++)(!1&l||n>=l)&&Object.keys(r.O).every(e=>r.O[e](a[i]))?a.splice(i--,1):(c=!1,l<n&&(n=l));if(c){e.splice(s--,1);var u=o();void 0!==u&&(t=u)}}return t}l=l||0;for(var s=e.length;s>0&&e[s-1][2]>l;s--)e[s]=e[s-1];e[s]=[a,o,l]},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={630:0,226:0};r.O.j=t=>0===e[t];var t=(t,a)=>{var o,l,[n,c,i]=a,u=0;if(n.some(t=>0!==e[t])){for(o in c)r.o(c,o)&&(r.m[o]=c[o]);if(i)var s=i(r)}for(t&&t(a);u<n.length;u++)l=n[u],r.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return r.O(s)},a=globalThis.webpackChunkpinkcrab_jukebox=globalThis.webpackChunkpinkcrab_jukebox||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})();var o=r.O(void 0,[226],()=>r(144));o=r.O(o)})();